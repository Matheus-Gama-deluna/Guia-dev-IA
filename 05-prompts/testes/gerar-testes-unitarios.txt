Aqui está a classe/função que implementa a funcionalidade:
[COLE CÓDIGO]

Gere testes unitários em [FRAMEWORK DE TESTES], cobrindo:
- caso de sucesso
- entradas inválidas
- casos de borda

Explique em 1 linha o que cada teste garante.

---

## Resposta Esperada (Exemplo - Jest)

```typescript
describe('AgendamentoService', () => {
  // Garante que agendamento válido é criado com sucesso
  it('deve criar agendamento quando horário está disponível', async () => {
    const dto = { clienteId: 'uuid', dataHora: new Date() };
    const resultado = await service.criar(dto);
    expect(resultado.status).toBe('PENDENTE');
  });

  // Garante que conflito de horário é tratado
  it('deve lançar erro quando horário já está ocupado', async () => {
    mockRepository.findByHorario.mockResolvedValue(agendamentoExistente);
    await expect(service.criar(dto)).rejects.toThrow(ConflictException);
  });

  // Garante tratamento de data no passado
  it('deve rejeitar agendamento com data no passado', async () => {
    const dto = { clienteId: 'uuid', dataHora: new Date('2020-01-01') };
    await expect(service.criar(dto)).rejects.toThrow(BadRequestException);
  });
});
```
